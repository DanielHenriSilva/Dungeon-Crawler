#include <stdio.h>
#include <stdlib.h>
#include <conio.h>
#include <windows.h>

#define KEY_UP 72
#define KEY_DOWN 80
#define KEY_ENTER 13

int selected = 0; // 0=Play, 1=Help, 2=Exit

void tela(void) {
    HWND hwnd = GetConsoleWindow();
    ShowWindow(hwnd, SW_MAXIMIZE);
    HANDLE hConsole = GetStdHandle(STD_OUTPUT_HANDLE);
    COORD size = {120, 300};
    SetConsoleScreenBufferSize(hConsole, size);
}

void drawMenu() {
    system("cls");
    
    // Cabeçalho
    printf("\033[1m\033[3m");
    printf("%*s\n", 86, "DUNGEONS OF");
    printf("\033[0m\n\n");
    
    printf("\033[1;31m");
    printf("%*s\n", 119, "####  ####      ##  ######  ######   ########    ####      ##  ##      ##  ######");
    printf("%*s\n", 115, " ##   ## ##     ##  ##      ##       ##     ##   ## ##     ##  ##      ##  ##");
    printf("%*s\n", 115, " ##   ##  ##    ##  ##      ##       ##     ##   ##  ##    ##  ##      ##  ##");
    printf("%*s\n", 119, " ##   ##   ##   ##  ######  ######   ########    ##   ##   ##  ##      ##  ######");
    printf("%*s\n", 119, " ##   ##    ##  ##  ##      ##       ##    ##    ##    ##  ##  ##      ##      ##");
    printf("%*s\n", 119, " ##   ##     ## ##  ##      ##       ##     ##   ##     ## ##  ##      ##      ##");
    printf("%*s\n", 119, "####  ##      ####  ##      ######   ##      ##  ##      ####  ##########  ######");
    printf("\033[0m\n\n\n");

    // Opções do menu
    printf("\033[1m\033[3m");
    printf("%*s%s\n", 83, selected == 0 ? "> " : "  ", "Play");
    printf("%*s%s\n", 83, selected == 1 ? "> " : "  ", "Help");
    printf("%*s%s\n", 83, selected == 2 ? "> " : "  ", "Exit");
    printf("\033[0m");
}

void handleInput() {
    int key = getch();
    
    // Se for uma tecla especial (0 ou 0xE0)
    if (key == 0 || key == 0xE0) {
        key = getch(); // Pegar o código real da tecla
        
        switch(key) {
            case KEY_UP:
                if (selected > 0) selected--;
                else selected = 2;
                break;
            case KEY_DOWN:
                if (selected < 2) selected++;
                else selected = 0;
                break;
        }
    }
    else if (key == KEY_ENTER) {
        switch(selected) {
            case 0: // Play
                system("cls");
                printf("Iniciando o jogo...\n");
                getch();
                exit(0);
                break;
            case 1: // Help
                system("cls");
                printf("=== AJUDA ===\n");
                printf("Use as setas para navegar\n");
                printf("Pressione Enter para selecionar\n");
                getch();
                break;
            case 2: // Exit
                system("cls");
                printf("Saindo do jogo...\n");
                exit(0);
                break;
        }
    }
}

int main(void) {
    tela();
    
    while(1) {
        drawMenu();
        handleInput();
    }
    
    return 0;
}